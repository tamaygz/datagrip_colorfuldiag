<idea-plugin>
    <id>com.tamaygz.colorfuldiag</id>
    <name>Colorful Diagrams</name>
    <vendor email="tamaygz@github.com" url="https://github.com/tamaygz">Tamay Gündüz</vendor>

    <description><![CDATA[
        Extends DataGrip's database diagram designer with visual organization features:
        <ul>
            <li>Color tables with custom colors</li>
            <li>Create visual containers to group tables</li>
            <li>Add sticky notes for documentation</li>
            <li>All changes are purely visual and stored in JSON metadata files</li>
        </ul>
        <p>This plugin does not modify your database schema - all additions are purely visual.</p>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.database</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Project-level service for managing diagram metadata -->
        <projectService
                serviceImplementation="com.tamaygz.colorfuldiag.persistence.DiagramMetadataService"/>

        <!-- Notification group for plugin messages -->
        <notificationGroup id="ColorfulDiagrams"
                           displayType="BALLOON"
                           toolWindowId="Database"/>

        <!-- File editor listener for diagram files -->
        <editorFactoryListener
                implementation="com.tamaygz.colorfuldiag.diagram.DiagramEditorListener"/>
    </extensions>

    <actions>
        <!-- Main action group in diagram editor toolbar -->
        <group id="ColorfulDiagrams.ToolbarGroup"
               text="Colorful Diagrams"
               description="Visual diagram organization tools"
               popup="true"
               icon="/icons/colorfuldiag.svg">

            <add-to-group group-id="Diagram.DefaultGroup" anchor="last"/>

            <action id="ColorfulDiagrams.ColorTable"
                    class="com.tamaygz.colorfuldiag.actions.ColorTableAction"
                    text="Color Selected Tables"
                    description="Apply a color to selected tables"
                    icon="/icons/color_table.svg"/>

            <action id="ColorfulDiagrams.CreateContainer"
                    class="com.tamaygz.colorfuldiag.actions.CreateContainerAction"
                    text="Create Container"
                    description="Create a visual container to group tables"
                    icon="/icons/container.svg"/>

            <action id="ColorfulDiagrams.AddStickyNote"
                    class="com.tamaygz.colorfuldiag.actions.AddStickyNoteAction"
                    text="Add Sticky Note"
                    description="Add a sticky note to the diagram"
                    icon="/icons/sticky_note.svg"/>

            <separator/>

            <action id="ColorfulDiagrams.ResetColors"
                    class="com.tamaygz.colorfuldiag.actions.ResetColorsAction"
                    text="Reset Colors"
                    description="Reset colors for selected tables"
                    icon="/icons/reset.svg"/>

            <separator/>

            <action id="ColorfulDiagrams.ExportMetadata"
                    class="com.tamaygz.colorfuldiag.actions.ExportMetadataAction"
                    text="Export Metadata"
                    description="Export plugin metadata to JSON file"
                    icon="/icons/export.svg"/>

            <action id="ColorfulDiagrams.ImportMetadata"
                    class="com.tamaygz.colorfuldiag.actions.ImportMetadataAction"
                    text="Import Metadata"
                    description="Import plugin metadata from JSON file"
                    icon="/icons/import.svg"/>
        </group>

        <!-- Context menu actions -->
        <group id="ColorfulDiagrams.ContextMenu"
               text="Colorful Diagrams"
               popup="true">

            <add-to-group group-id="Diagram.NodePopupGroup" anchor="last"/>

            <action id="ColorfulDiagrams.ColorTableContext"
                    class="com.tamaygz.colorfuldiag.actions.ColorTableAction"
                    text="Color Table"
                    description="Apply a color to this table"/>

            <action id="ColorfulDiagrams.AddToContainerContext"
                    class="com.tamaygz.colorfuldiag.actions.AddToContainerAction"
                    text="Add to Container"
                    description="Add this table to a container"/>

            <action id="ColorfulDiagrams.RemoveFromContainerContext"
                    class="com.tamaygz.colorfuldiag.actions.RemoveFromContainerAction"
                    text="Remove from Container"
                    description="Remove this table from its container"/>
        </group>
    </actions>
</idea-plugin>
